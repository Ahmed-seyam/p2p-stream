<!DOCTYPE html>

<!-- 
  ==========================================================================================
  ---------------------------------------- NIMBLE-------------------------------------------
  - allow cors origin by updating config file /etc/nimble/nimble.conf
  1) Add These Lines To The File And Save
  access_control_allow_origin = *
  access_control_allow_credentials = true
  access_control_expose_headers = Content-Length
  access_control_allow_headers = Range
  vod_chunk_duration = 2

  2) create a live pull from wms panel that listens to a rtmp interface

  ==========================================================================================
  -- Change The cdnStream Property In This File
  ==========================================================================================
  ==========================================================================================
 -->

<!-- 
 ===========================================================================================
 =============================== WebRTC ====================================================

 doc
  https://blog.wmspanel.com/2022/05/webrtc-publish-setup-nimble-streamer.html
  -->

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script
      type="text/javascript"
      src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"
    ></script>
    <script type="text/javascript" src="/js/viblast/viblast.js"></script>

    <script src="sldp-v2.24.0.min.js" type="text/javascript"></script>
  </head>

  <body>
    <h2>Viblast Player</h2>
    <div id="player-container" style="width: 848px; height: 640px" />

    <script>
      Viblast.play({
        container: "player-container",
        channel: {
          cdnStream:
            "http://223.223.217.173:8081/pull-stream/str1/playlist.m3u8",
        },
      });
    </script>

    <h2>SLDP PLAYER</h2>
    <div id="sldp_player_wrapper"></div>

    <script>
      document.addEventListener("DOMContentLoaded", initPlayer);
      var sldpPlayer;
      function initPlayer() {
        sldpPlayer = SLDP.init({
          container: "sldp_player_wrapper",
          stream_url: "ws://223.223.217.173:8081/pull-stream/str1",
          height: 360,
          width: 640,
          autoplay: true,
        });
      }

      function removePlayer() {
        sldpPlayer.destroy();
      }
    </script>
  </body>
</html>
